<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Assets Submission</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/business_digital_summary.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-logo">
                <a href="../home.html">
                    <img src="images/Logo.jpg" alt="AssignHub Logo">
                </a>
            </div>
            <div class="navbar-icons">
                <a href="#" class="icon-link" id="menu-icon">
                    <i class="fas fa-bars"></i>
                </a>
                <a href="#" class="icon-link">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="#" class="icon-link">
                    <i class="fas fa-bell"></i>
                </a>
                <a href="#" class="icon-link">
                    <i class="fas fa-user-circle"></i>
                </a>
            </div>
        </div>
    </nav>

    <div class="page-content">
        <div class="summary-card" id="summaryCard">
            <div class="summary-header">
                <div class="summary-title">Digital Assets Submission</div>
                <div class="success-message">
                    <i class="fas fa-check-circle"></i>
                    Your digital asset has been successfully submitted!
                </div>
                <!-- <div class="submission-id" id="submissionId"></div> -->
            </div>
            
            <div class="summary-section">
                <div class="section-title">
                    <i class="fas fa-info-circle"></i>
                    Basic Information
                    <span class="status-badge status-published">Published</span>
                </div>
                <div class="summary-row">
                    <div class="summary-label">Title:</div>
                    <div class="summary-value" id="summaryTitle"></div>
                </div>
                <div class="summary-row">
                    <div class="summary-label">Name:</div>
                    <div class="summary-value" id="summaryName"></div>
                </div>
                <div class="summary-row">
                    <div class="summary-label">Digital Assets Listing:</div>
                    <div class="summary-value" id="summaryListing"></div>
                </div>
                <div class="summary-row">
                    <div class="summary-label">Visibility:</div>
                    <div class="summary-value" id="summaryVisibility"></div>
                </div>
                <div class="summary-row">
                    <div class="summary-label">Submission Date:</div>
                    <div class="summary-value" id="submissionDate"></div>
                </div>
            </div>
            
            <div class="summary-section">
                <div class="section-title">
                    <i class="fas fa-tags"></i>
                    Pricing & Licensing
                </div>
                <div class="summary-row">
                    <div class="summary-label">Price Option:</div>
                    <div class="summary-value" id="summaryPriceOption"></div>
                </div>
                <div class="summary-row">
                    <div class="summary-label">Licensing Option:</div>
                    <div class="summary-value" id="summaryLicensingOption"></div>
                </div>
                <div class="summary-row">
                    <div class="summary-label">Category:</div>
                    <div class="summary-value" id="summaryCategory"></div>
                </div>
                <div class="summary-row">
                    <div class="summary-label">Renewal:</div>
                    <div class="summary-value" id="summaryRenewal"></div>
                </div>
            </div>
            
            <div class="summary-section">
                <div class="section-title">
                    <i class="fas fa-align-left"></i>
                    Description
                </div>
                <div class="summary-row">
                    <div class="summary-value" id="summaryDescription"></div>
                </div>
            </div>
            
            <div class="summary-section">
                <div class="section-title">
                    <i class="fas fa-tags"></i>
                    Product Tags
                </div>
                <div class="summary-row">
                    <div class="summary-value" id="summaryTags"></div>
                </div>
            </div>
            
            <div class="summary-section">
                <div class="section-title">
                    <i class="fas fa-images"></i>
                    Photos
                </div>
                <div class="summary-row">
                    <div class="summary-value">
                        <div id="photoCount">0 photos uploaded</div>
                        <div class="thumbnails-container" id="summaryThumbnails"></div>
                    </div>
                </div>
            </div>
            
            <div class="summary-section" id="renewalDetailsSection" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-sync-alt"></i>
                    Renewal Details
                </div>
                <div class="summary-row">
                    <div class="summary-label">Expiration Date:</div>
                    <div class="summary-value" id="summaryExpirationDate"></div>
                </div>
                <div class="summary-row">
                    <div class="summary-label">Renewal Date:</div>
                    <div class="summary-value" id="summaryRenewalDate"></div>
                </div>
                <div class="summary-row" id="summaryReminders" style="display: none;">
                    <div class="summary-label">Reminders:</div>
                    <div class="summary-value" id="remindersList"></div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" id="editBtn">
                    <i class="fas fa-edit"></i>
                    Edit Submission
                </button>
                <button class="btn btn-primary" id="doneBtn">
                    <i class="fas fa-check"></i>
                    Done
                </button>
            </div>
        </div>
    </div>

    <!-- Image Preview Modal -->
    <div class="modal" id="imageModal">
        <span class="close-modal" id="closeModal">&times;</span>
        <div class="modal-content">
            <img class="modal-image" id="modalImage" src="" alt="Preview">
        </div>
    </div>

    <script>
        window.addEventListener('DOMContentLoaded', function() {
            // // Generate a random submission ID
            // const submissionId = 'DA-' + Math.floor(1000 + Math.random() * 9000);
            // document.getElementById('submissionId').textContent = `Submission ID: ${submissionId}`;
            
            // Get current date
            const today = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit' 
            };
            document.getElementById('submissionDate').textContent = today.toLocaleDateString('en-US', options);
            
            // Retrieve stored data
            const formData = JSON.parse(sessionStorage.getItem('digitalAssetFormData')) || {};
            const uploadedFiles = JSON.parse(sessionStorage.getItem('uploadedFiles')) || [];
            
            // Debug logs
            console.log("Retrieved Form Data:", formData);
            console.log("Retrieved Uploaded Files:", uploadedFiles);
            
            // Display basic information
            document.getElementById('summaryTitle').textContent = formData.assetTitle || '<span class="empty-value">Not provided</span>';
            document.getElementById('summaryName').textContent = formData.assetName || '<span class="empty-value">Not provided</span>';
            document.getElementById('summaryListing').textContent = formData.assetListing || '<span class="empty-value">Not provided</span>';
            
            const visibilityText = formData.visibility === 'private' ? 
                '<span>Private <i class="fas fa-lock"></i></span>' : 
                '<span>Public <i class="fas fa-globe-americas"></i></span>';
            document.getElementById('summaryVisibility').innerHTML = visibilityText;
            
            // Display pricing & licensing
            document.getElementById('summaryPriceOption').textContent = formData.priceOption || '<span class="empty-value">Not provided</span>';
            document.getElementById('summaryLicensingOption').textContent = formData.licensingOption || '<span class="empty-value">Not provided</span>';
            document.getElementById('summaryCategory').textContent = formData.category || '<span class="empty-value">Not provided</span>';
            document.getElementById('summaryRenewal').textContent = formData.renewal || '<span class="empty-value">Not provided</span>';
            
            // Display description
            document.getElementById('summaryDescription').textContent = formData.description || '<span class="empty-value">Not provided</span>';
            
            // Display tags
            const tagsValue = formData.productTags ? 
                formData.productTags.split(',').map(tag => `<span class="tag">${tag.trim()}</span>`).join(' ') : 
                '<span class="empty-value">No tags provided</span>';
            document.getElementById('summaryTags').innerHTML = tagsValue;
            
            // Display photos
            document.getElementById('photoCount').textContent = `${uploadedFiles.length} photo${uploadedFiles.length !== 1 ? 's' : ''} uploaded`;
            const thumbnailsContainer = document.getElementById('summaryThumbnails');
            
            if (uploadedFiles.length > 0) {
                uploadedFiles.forEach(file => {
                    const img = document.createElement('img');
                    img.className = 'thumbnail';
                    img.src = file.dataUrl;
                    img.alt = file.name;
                    thumbnailsContainer.appendChild(img);
                    
                    // Add click event for image preview
                    img.addEventListener('click', function() {
                        document.getElementById('modalImage').src = this.src;
                        document.getElementById('imageModal').style.display = 'flex';
                    });
                });
            } else {
                thumbnailsContainer.innerHTML = '<span class="empty-value">No photos uploaded</span>';
            }
            
            // Display renewal details if applicable
            if (formData.renewal === 'Yes' && formData.renewalDetails) {
                document.getElementById('renewalDetailsSection').style.display = 'block';
                document.getElementById('summaryExpirationDate').textContent = formData.renewalDetails.expirationDate || '<span class="empty-value">Not specified</span>';
                document.getElementById('summaryRenewalDate').textContent = formData.renewalDetails.renewalDate || '<span class="empty-value">Not specified</span>';
                
                // Display reminders if they exist
                if (formData.renewalDetails.reminders && formData.renewalDetails.reminders.length > 0) {
                    document.getElementById('summaryReminders').style.display = 'flex';
                    const remindersList = document.getElementById('remindersList');
                    remindersList.innerHTML = '';
                    
                    formData.renewalDetails.reminders.forEach(reminder => {
                        const reminderElement = document.createElement('div');
                        reminderElement.className = 'reminder-item';
                        reminderElement.innerHTML = `
                            <i class="fas fa-bell"></i>
                            <div>
                                <strong>${reminder.option}</strong>: ${reminder.description || 'No description'}
                            </div>
                        `;
                        remindersList.appendChild(reminderElement);
                    });
                }
            }
            
            // Button event handlers
            document.getElementById('editBtn').addEventListener('click', function() {
                window.location.href = 'business_digital_summary.html';
            });
            
            document.getElementById('doneBtn').addEventListener('click', function() {
                window.location.href = 'business_shopping_display.html';
            });

            // Menu icon functionality
            document.getElementById('menu-icon').addEventListener('click', function(e) {
                e.preventDefault();
                alert('Mobile menu would open here');
            });
            
            // Other icon functionality
            document.querySelectorAll('.icon-link').forEach(icon => {
                if (icon.id !== 'menu-icon') {
                    icon.addEventListener('click', function(e) {
                        e.preventDefault();
                        alert(icon.querySelector('i').className.split(' ')[1].replace('fa-', '') + ' clicked');
                    });
                }
            });
            
            // Image modal functionality
            const modal = document.getElementById('imageModal');
            const closeBtn = document.getElementById('closeModal');
            
            closeBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            window.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>